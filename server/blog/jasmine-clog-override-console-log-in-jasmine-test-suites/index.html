<!DOCTYPE html>
<html>
<head>
  <title>Jasmine-Clog : Override console.log in Jasmine Test Suites | WegnerDesign</title>
  <link rel="stylesheet" type="text/css" href="/stylesheets/blog.css" />
  <link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" />
  <link rel="stylesheet" type="text/css" href="/fonts/stylesheet.css" />
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-19623283-1']);
      _gaq.push(['_setDomainName', 'wegnerdesign.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  <script type="text/javascript">
    function go() {
      var tweetLink = document.getElementsByClassName("tweet")[0].getElementsByTagName("a")[0];

      var url = encodeURIComponent("http://www.wegnerdesign.com/blog/jasmine-clog-override-console-log-in-jasmine-test-suites");
      var name = encodeURIComponent("Jasmine-Clog : Override console.log in Jasmine Test Suites via #WegnerDesign")

      tweetLink.href = "https://twitter.com/intent/tweet?url="+url+"&text="+name;
    }
  </script>
  <meta property="og:type" content="article" />
  <meta property="og:title" content="" />
  <meta property="og:url" content="" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="WegnerDesign" />
</head>
<body onload="go();">
  <div id="socialColumn">
    <div class='tweet'><a target="_blank" href="#"></a></div>
  </div>
  <div id="metaColumn">
    <div id="logo">
      <img src="/images/logo.png" />
    </div>
    <div id="footercontrols">
      <div id="index"><a href="/blog"><img src="/images/index.png" /></a></div><!--
     --><div id="rss"><a href="/feed.xml"><img src="/images/rss.png" /></a></div></div>
    </div>
  </div>
  <div id="post">
    <h2><span class='title'>Jasmine-Clog : Override console.log in Jasmine Test Suites</span><span class="date">16 November 2012</span></h2>
    <div id="body">I've recently started writing frontend test suites for <a title="MySocialCloud" href="http://mysocialcloud.com" target="_blank">MySocialCloud</a>.  We use <a title="Backbone.js" href="http://backbonejs.org/" target="_blank">Backbone.js</a> for pretty much all of our frontend work, which makes running test suites <a href="http://tomphilip.me/index.php/testing-backbone-with-jasmine-and-sinon/" target="_blank">very</a> <a href="http://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine-sinon.html" target="_blank">interesting</a>.  I've settled on using <a title="Jasmine " href="http://pivotal.github.com/jasmine/" target="_blank">Jasmine</a> for the actual unit testing, and <a title="Sinon" href="http://sinonjs.org/" target="_blank">Sinon</a> to mock API interactions. It's actually a really cool setup, and Jasmine's <a title="Behavior Driven Development" href="http://en.wikipedia.org/wiki/Behavior-driven_development" target="_blank">BDD</a>-style testing makes a lot of sense for how we utilize Backbone.

Through the whole process, though, there's been one thing pestering me.  At MySocialCloud we do <strong>a lot</strong> of logging.  We lock it so that only users on the development team see the logs, but when they're turned on every page comes with 100s of lines of logs.  This is great for frontend development, but has proved very frustrating when writing test.  Pretty often in a test I need to send out a console.log about how far along the test suite is, or perhaps if a non-essential stub got called.  Mingling those in with 1000s of lines of other logs is essentially useless - if I can't see the data at first glance, then I mine as well not have it there.

To solve this, I've created a little jasmine plugin called <a href="https://github.com/josephwegner/jasmine-clog" target="_blank">jasmine-clog</a>.  Put simply, jasmine-clog overrides the regular console.log function, and adds a new logging function to the jasmine object.  The way that it does this makes sure that any logging that you've already got in your code doesn't throw errors, but it also won't show up in the console.  In order to actually get something to show up in the console, you have to call jasmine.clog().

There's more details on how to use it and how to set it up in the <a href="https://github.com/josephwegner/jasmine-clog" target="_blank">github repo</a>, but it's really pretty simple.  Just make sure you include jasmine-clog.js <strong>after</strong> your base jasmine file, and leave the rest of the work up to us.  jasmine.clog() away!
</div>
    <div id="disqus_thread" style="width: 75%; margin-top: 50px;"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'wegnerdesign'; // required: replace example with your forum shortname
        var disqus_identifier = '';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
  <div id="footer"></div>
</body>
</html>